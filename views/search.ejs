<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Search Projects | AutoBids</title>

    <meta property="og:url" content="https://AutoBids.co/" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="AutoBids" />
    <meta property="og:description" content="AutoBids is a tool which gives you upper hand to other freelancers" />
    <meta property="og:image" content="https://cdn.bidman.co/images/logo.png" />

    <!-- Favicon -->
    <link rel="apple-touch-icon" href="https://cdn.bidman.co/images/favicon/favicon-120x120.png" sizes="120x120">
    <link rel="apple-touch-icon" href="https://cdn.bidman.co/images/favicon/favicon-152x152.png" sizes="152x152">
    <link rel="apple-touch-icon" href="https://cdn.bidman.co/images/favicon/favicon-180x180.png" sizes="180x180">
    <meta name="theme-color" content="#0f172a">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="https://cdn.bidman.co/images/favicon/favicon-144x144.png">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" type="text/css">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Toastr CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet">

    <style>
        :root {
            --primary: #3b82f6;
            --primary-hover: #2563eb;
            --secondary: #60a5fa;
            --dark-blue: #0f172a;
            --medium-blue: #1e293b;
            --light-blue: #334155;
            --accent-purple: #8b5cf6;
            --accent-pink: #ec4899;
            --text-light: rgba(255, 255, 255, 0.9);
            --text-lighter: rgba(255, 255, 255, 0.6);
            --border-color: rgba(59, 130, 246, 0.2);
            --card-bg: rgba(30, 41, 59, 0.7);
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --gradient-primary: linear-gradient(90deg, rgba(53,27,49,1) 0%, rgba(102,29,58,1) 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Outfit', sans-serif;
        }
        
        body {
            background-color: var(--dark-blue);
            color: var(--text-light);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Animated Background */
        .stars-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .star {
            position: absolute;
            background-color: #fff;
            border-radius: 50%;
            opacity: 0.3;
            animation: twinkle var(--duration) infinite ease-in-out;
            animation-delay: var(--delay);
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.8; }
        }
        
        /* Animated Gradient Background */
        .gradient-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2;
            background: linear-gradient(125deg, var(--dark-blue), var(--medium-blue), var(--light-blue), var(--medium-blue), var(--dark-blue));
            background-size: 400% 400%;
            animation: gradientAnimation 15s ease infinite;
        }
        
        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        /* Glowing Orbs */
        .orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(80px);
            opacity: 0.15;
            z-index: -1;
        }
        
        .orb-1 {
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, var(--accent-purple), var(--primary));
            top: -100px;
            right: -100px;
            animation: float 8s ease-in-out infinite;
        }
        
        .orb-2 {
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, var(--accent-pink), var(--primary));
            bottom: -200px;
            left: -200px;
            animation: float 10s ease-in-out infinite reverse;
        }
        
        .orb-3 {
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, var(--secondary), var(--primary));
            top: 50%;
            right: 10%;
            animation: float 12s ease-in-out infinite 2s;
        }
        
        @keyframes float {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-20px, -30px); }
        }
        
        /* Navbar */
        .navbar {
            background-color: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            padding: 15px 0;
        }
        
        .navbar-brand {
            font-weight: 700;
            font-size: 24px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-right: 40px;
        }
        
        .nav-link {
            color: var(--text-light) !important;
            font-weight: 500;
            padding: 8px 16px !important;
            border-radius: 8px;
            transition: all 0.3s ease;
            margin: 0 5px;
        }
        
        .nav-link:hover {
            background-color: rgba(59, 130, 246, 0.1);
            color: #fff !important;
        }
        
        .nav-link.active {
            background-color: rgba(59, 130, 246, 0.2);
            color: var(--secondary) !important;
        }
        
        /* Card Styles */
        .card {
            background-color: var(--card-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            border-color: rgba(59, 130, 246, 0.4);
        }
        
        .card-header {
            background-color: rgba(15, 23, 42, 0.6);
            border-bottom: 1px solid var(--border-color);
            border-radius: 16px 16px 0 0 !important;
            padding: 20px;
        }
        
        .card-body {
            padding: 24px;
        }
        
        .card-footer {
            background-color: rgba(15, 23, 42, 0.4);
            border-top: 1px solid var(--border-color);
            border-radius: 0 0 16px 16px !important;
            padding: 16px 24px;
        }
        
        /* Alert Styles */
        .alert {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-light);
        }
        
        .alert-success {
            background: var(--gradient-primary);
            border-color: rgba(102,29,58,0.5);
        }
        
        /* Dropdown Menu */
        .dropdown-menu {
            background-color: var(--medium-blue);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            padding: 12px 0;
        }
        
        .dropdown-item {
            color: var(--text-light);
            padding: 10px 20px;
            transition: all 0.2s ease;
        }
        
        .dropdown-item:hover {
            background-color: rgba(59, 130, 246, 0.1);
            color: #fff;
        }
        
        .dropdown-divider {
            border-top: 1px solid var(--border-color);
            margin: 8px 0;
        }
        
        /* Profile Image */
        .img-profile {
            width: 40px;
            height: 40px;
            object-fit: cover;
            border: 2px solid var(--border-color);
        }
        
        /* Form Controls */
        .form-control {
            background-color: rgba(15, 23, 42, 0.6);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-light);
            transition: all 0.3s ease;
        }
        
        .form-control:focus {
            background-color: rgba(15, 23, 42, 0.8);
            border-color: var(--primary);
            box-shadow: 0 0 0 0.25rem rgba(59, 130, 246, 0.25);
            color: var(--text-light);
        }
        
        /* Buttons */
        .btn {
            border-radius: 8px;
            padding: 8px 16px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(90deg, var(--primary), var(--primary-hover));
            border: none;
        }
        
        .btn-primary:hover {
            background: linear-gradient(90deg, var(--primary-hover), var(--primary));
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: linear-gradient(90deg, var(--success), #0d9488);
            border: none;
        }
        
        .btn-success:hover {
            background: linear-gradient(90deg, #0d9488, var(--success));
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background: linear-gradient(90deg, var(--danger), #b91c1c);
            border: none;
        }
        
        .btn-danger:hover {
            background: linear-gradient(90deg, #b91c1c, var(--danger));
            transform: translateY(-2px);
        }
        
        /* Search Results */
        .search-result-item {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            margin-bottom: 20px;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .search-result-item:hover {
            transform: translateY(-5px);
            border-color: rgba(59, 130, 246, 0.4);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .info-card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 10px;
        }
        
        .info-card-title a {
            color: var(--secondary);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .info-card-title a:hover {
            color: var(--primary);
        }
        
        .info-card-description {
            color: var(--text-lighter);
            margin-bottom: 15px;
            line-height: 1.6;
        }
        
        .info-card-details {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            color: var(--text-lighter);
        }
        
        .info-card-details .icon {
            margin-right: 10px;
        }
        
        .info-card-price {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-light);
            margin-bottom: 10px;
        }
        
        .info-card-price-type {
            color: var(--text-lighter);
            margin-bottom: 15px;
        }
        
        .bid_price {
            width: 100px;
            display: inline-block;
            padding: 5px 10px;
            height: 38px;
            font-size: 15px;
            color: var(--text-light);
            background-color: rgba(15, 23, 42, 0.6);
            border: 1px solid var(--border-color);
            border-radius: 8px;
        }
        
        .bid_price:focus {
            background-color: rgba(15, 23, 42, 0.8);
            border-color: var(--primary);
            box-shadow: 0 0 0 0.25rem rgba(59, 130, 246, 0.25);
            color: var(--text-light);
            outline: none;
        }
        
        /* Upgrade Badges */
        .upgrade-badge {
            font-size: 11px;
            font-weight: 700;
            line-height: 1;
            padding: 6px 12px;
            color: #ffffff;
            border-radius: 100px;
            margin-right: 6px;
            margin-bottom: 6px;
            display: inline-block;
        }
        
        .upgrade-preferred { background: #08b9a8; }
        .upgrade-verified { background: #47b900; }
        .upgrade-nda { background: #2259b5; }
        .upgrade-ip { background: #dc0057; }
        .upgrade-featured { background: #f57207; }
        .upgrade-sealed { background: #29b2fe; }
        .upgrade-nonpublic { background: #ffa905; }
        .upgrade-fulltime { background: #52bb52; }
        .upgrade-urgent { background: #eb3730; }
        .upgrade-recruiter { background: #7d30c9; }
        
        /* Pagination */
        .search-result-pagination ul {
            display: flex;
            list-style: none;
            padding: 0;
            margin: 20px 0;
            justify-content: center;
        }
        
        .search-result-pagination li {
            margin: 0 5px;
        }
        
        .search-result-pagination a {
            display: inline-block;
            padding: 8px 16px;
            background-color: rgba(15, 23, 42, 0.6);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .search-result-pagination a:hover,
        .search-result-pagination a.active {
            background-color: rgba(59, 130, 246, 0.2);
            border-color: var(--primary);
            color: #fff;
        }
        
        .search-result-pagination li.disabled a,
        .search-result-pagination li.disabled span {
            background-color: rgba(15, 23, 42, 0.3);
            border-color: var(--border-color);
            color: var(--text-lighter);
            cursor: not-allowed;
        }
        
        /* Modal */
        .modal-content {
            background-color: var(--medium-blue);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            color: var(--text-light);
        }
        
        .modal-header {
            border-bottom: 1px solid var(--border-color);
            padding: 20px;
        }
        
        .modal-title {
            color: var(--text-light);
        }
        
        .modal-body {
            padding: 24px;
        }
        
        .modal-footer {
            border-top: 1px solid var(--border-color);
            padding: 20px;
        }
        
        /* New Project Alert */
        .search-result-newProjectAlert {
            margin-bottom: 20px;
        }
        
        .search-result-newProjectAlert-icon {
            display: inline-block;
            padding: 10px 20px;
            background: var(--gradient-primary);
            color: white;
            border-radius: 100px;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .search-result-newProjectAlert-icon:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>

<body>
    <!-- Background Elements -->
    <div class="gradient-bg"></div>
    <div class="stars-container" id="stars-container"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>

    <div id="wrapper">
        <div id="content-wrapper" class="d-flex flex-column">
            <div id="content">
                <!-- Navbar -->
                <nav class="navbar navbar-expand navbar-dark mb-4 static-top shadow">
                    <div class="container-fluid">
                        <a class="navbar-brand position-relative" href="/myBids">
                            <h2>
                                <img style="height: 30px;" src="/images/bidmanwhite.png" alt="AutoBids Logo">
                            </h2>
                        </a>

                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="/myBids" role="button">
                                    <span class="d-none d-sm-inline">My&nbsp;</span>Bids
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" href="/search" role="button">
                                    Search<span class="d-none d-sm-inline">&nbsp;Projects</span>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="/bidai" role="button">
                                    <span class="d-none d-sm-inline">AutoBids&nbsp;</span>AI
                                </a>
                            </li>
                        </ul>

                        <ul class="navbar-nav ms-auto">
                            <li class="nav-item dropdown no-arrow">
                                <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                    <div class="d-none d-sm-block me-2 text-end">
                                        <p class="text-light small m-0"><%= user.username %></p>
                                    </div>
                                    <i class="fas fa-chevron-down me-2 text-center" style="width: 20px;top: -2px;position: relative;"></i>
                                    <span class="position-relative">
                                        <img class="img-profile rounded-circle" src="<%= user.profilePicture ? user.profilePicture : 'https://cdn3.f-cdn.com/ppic/245304646/logo/75311776/profile_logo_75311776.jpg' %>">
                                    </span>
                                </a>
                                <div class="dropdown-menu dropdown-menu-end shadow animated--grow-in" aria-labelledby="userDropdown">
                                    <a class="dropdown-item text-success" href="/autoBidTurnOn?autoBid=<%= userAutoBid === 'ON' ? 'Off' : 'ON' %>" style="font-weight: 600; font-size: 16px">
                                        <i class="fas fa-check me-2 text-center" style="width: 20px"></i>
                                        Autobidding is <%= userAutoBid==='ON' ? 'ON' : 'OFF' %> 
                                        <div style="white-space: initial; font-size: 12px !important; padding: 5px 0px 0px; color: #a5b4fc; font-style: italic; font-weight: 500; line-height: 1.3;">
                                            Turning on autobidding from here will not apply any bid or time limit
                                        </div>
                                    </a>
                                    <div class="dropdown-divider"></div>
                                    <a class="dropdown-item" href="/skills">
                                        <i class="fas fa-heart me-2 text-center" style="width: 20px"></i>
                                        Skills
                                    </a>
                                    <a class="dropdown-item" href="/skills-sets">
                                        <i class="fas fa-layer-group me-2 text-center" style="width: 20px"></i>
                                        Skill Sets
                                    </a>
                                    <a class="dropdown-item" href="/countries">
                                        <i class="fas fa-flag me-2 text-center" style="width: 20px"></i>
                                        Countries
                                    </a>
                                    <a class="dropdown-item" href="/client-stats">
                                        <i class="fas fa-filter me-2 text-center" style="width: 20px"></i>
                                        Client Stats
                                    </a>
                                    <a class="dropdown-item" href="/budget">
                                        <i class="fas fa-dollar-sign me-2 text-center" style="width: 20px"></i>
                                        Project Budget
                                    </a>
                                    <a class="dropdown-item" href="/bidPrice">
                                        <i class="fas fa-gavel me-2 text-center" style="width: 20px"></i>
                                        Bid Price
                                    </a>
                                    <a class="dropdown-item" href="/period">
                                        <i class="far fa-clock me-2 text-center" style="width: 20px"></i>
                                        Project Period
                                    </a>
                                    <a class="dropdown-item" href="/timeSetting">
                                        <i class="far fa-clock me-2 text-center" style="width: 20px"></i>
                                        Time Setting
                                    </a>
                                    <a class="dropdown-item" href="/tcats">
                                        <i class="fas fa-sitemap me-2 text-center" style="width: 20px"></i>
                                        Template Categories
                                    </a>
                                    <a class="dropdown-item" href="/temp">
                                        <i class="fas fa-list-ul me-2 text-center" style="width: 20px"></i>
                                        Templates
                                    </a>
                                    <a class="dropdown-item" href="/passChange">
                                        <i class="fas fa-user-lock me-2 text-center" style="width: 20px"></i>
                                        Change Password
                                    </a>
                                    <a class="dropdown-item" href="/skills">
                                        <i class="fas fa-cog me-2 text-center" style="width: 20px"></i>
                                        More Settings
                                    </a>
                                    <a class="dropdown-item" href="#">
                                        <i class="fas fa-video me-2 text-center" style="width: 20px"></i>
                                        Demo Video
                                    </a>
                                    <a class="dropdown-item" href="/guide">
                                        <i class="fas fa-book me-2 text-center" style="width: 20px"></i>
                                        AutoBids Guide
                                    </a>
                                    <a class="dropdown-item" href="/logout">
                                        <i class="fas fa-sign-out-alt me-2 text-center" style="width: 20px"></i>
                                        Logout
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>

                <div class="container-fluid">
                    <!-- Welcome Alert -->
                    <div class="alert alert-success alert-dismissible fade show mb-4">
                        <div class="px-4 py-3">
                            <h4 class="alert-heading mt-2">Welcome to AutoBids!</h4>
                            <p style="font-size: 17px;" class="mb-2">Please note your AutoBids username is: <strong><%= user.username %></strong></p>
                            <p class="mb-2"><a href="#" class="text-decoration-underline text-white">Click here to watch complete demo video of AutoBids</a></p>
                            <p class="mb-0">Your 5-days free trial subscription has started.</p>
                            <p class="mb-0"><strong>Click show more to view contact details.</strong></p>
                        </div>
                        <div class="px-4 pb-3">
                            <div>
                                <p class="mb-3">Use this free trial period to explore all the features of AutoBids.</p>
                                <p class="mb-0">Follow these three important steps for getting started and making the most of your AutoBids experience:</p>
                                <p class="mb-0 ms-3"><strong><a href="/skills" class="text-white">1- Select project skills</a></strong> to stay notified with newly posted projects on which you love to work.</p>
                                <p class="mb-0 ms-3"><strong><a href="/temp" class="text-white">2- Write awesome proposals</a></strong> to take full advantage of quick and auto bidding using AutoBids.</p>
                                <p class="mb-3 ms-3"><strong><a href="/search" class="text-white">3- Start Autobidding</a></strong> and let AutoBids place bid on newly posted projects within seconds.</p>
                                <p class="mb-0">For contact detail verification, queries or payment information, please contact us at:</p>
                                <p class="mb-0 ms-3">• Whatsapp: <strong><a href="#" class="text-white"><%= adminPhone %></a>, <a href="#" class="text-white"></a></strong></p>
                                <p class="mb-0 ms-3">• Email: <strong><a href="mailto:<%= adminEmail %>" class="text-white"><%= adminEmail %></a></strong></p>
                                <p class="mb-2 ms-3">• Skype: <strong><%= adminSkype %></strong></p>
                                <p class="mb-3 ms-3">• Telegram: <strong><a href="#" class="text-white"><%= adminTelegram %></a></strong></p>
                                <p class="mb-2"><a href="/guide" class="text-white">Click here to read guide to help understand Autobids</a></p>
                                <p class="mb-0">Happy bidding</p>
                            </div>
                        </div>
                        <button type="button" class="btn-close btn-close-white me-3 mt-3" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>

                    <!-- Bonus Alert -->
                    <div class="p-4 mb-4 text-white rounded shadow-sm" style="background: var(--gradient-primary);">
                        <p class="mb-1">You currently have a limit of 50 bids. But don't worry, by verifying your contact details, you can unlock 500 bids! 🚀</p>
                        <p class="mb-1">It's simple, just contact us at any of these:</p>
                        <div class="row">
                            <div class="col-xl-4 col-lg-6 col-md-8 order-md-0 order-lg-0">
                                <p class="mb-0 ms-3" style="font-size: 14px">• Whatsapp: <a href="#" class="text-white"><%= adminPhone %></a></p>
                            </div>
                            <div class="col-xl-4 col-lg-6 col-md-8 order-md-2 order-lg-0">
                                <p class="mb-0 ms-3" style="font-size: 14px">• Email: <a href="mailto:<%= adminEmail %>" class="text-white"><%= adminEmail %></a></p>
                            </div>
                            <div class="col-xl-2 col-lg-6 col-md-4 order-md-1 order-lg-0">
                                <p class="mb-0 ms-3" style="font-size: 14px">• Telegram: <a href="#" class="text-white"><%= adminTelegram %></a></p>
                            </div>
                            <div class="col-xl-2 col-lg-6 col-md-4 order-md-1 order-lg-0">
                                <p class="mb-0 ms-3" style="font-size: 14px">• Skype: <a href="#" class="text-white"><%= adminSkype %></a></p>
                            </div>
                        </div>
                        <p class="mt-1 mb-0">Bonus: Get FREE AI bids when you contact us! 🎉</p>
                    </div>

                    <div class="container-fluid">
                        <!-- New Projects Alert -->
                        <div class="search-result-newProjectAlert" style="display: none">
                            <a href="?page=1" class="text-decoration-none"><span class="search-result-newProjectAlert-icon">View 0 new jobs</span></a>
                        </div>

                        <!-- Search Results -->
                        <div class="search-result-list">
                            <% data.forEach(project=> { %>
                                <div class="search-result-item">
                                    <div class="row">
                                        <div class="col-12 col-project-description">
                                            <div class="d-flex">
                                                <div class="me-2 flex-grow-1">
                                                    <h2 class="info-card-title">
                                                        <a href="https://www.freelancer.com/projects/graphic-design/Lead-Generating-Corporate-Website"
                                                            target="_blank" class="search-result-link">
                                                            <%= project.title %>
                                                        </a>
                                                    </h2>
                                                    <p class="info-card-description">
                                                        <%= project.description %>
                                                    </p>
                                                    <div class="d-md-flex d-lg-block d-xl-flex">
                                                        <div class="me-md-5 me-lg-0 me-xl-5">
                                                            <div class="info-card-details">
                                                                <span class="icon">
                                                                    <svg class="icon-image" width="18" height="18"
                                                                        xmlns="http://www.w3.org/2000/svg"
                                                                        viewBox="0 0 30 30">
                                                                        <g fill="none">
                                                                            <path
                                                                                d="M20.5 3.805V1.2c0-.662-.536-1.2-1.196-1.2H4.946C4.286 0 3.75.538 3.75 1.2v2.606c0 .948.383 1.876 1.052 2.546L10.433 12l-5.631 5.65a3.577 3.577 0 0 0-1.052 2.545V22.8c0 .662.536 1.2 1.196 1.2h14.358c.66 0 1.196-.538 1.196-1.2v-2.605a3.58 3.58 0 0 0-1.052-2.547L13.817 12l5.631-5.648A3.63 3.63 0 0 0 20.5 3.805z"
                                                                                fill="#363F4D"></path>
                                                                            <path fill="#FFF"
                                                                                d="M8.536 20.4l3.589-3.6 3.59 3.6z"></path>
                                                                        </g>
                                                                    </svg>
                                                                </span>
                                                                <span>
                                                                    <div class="d-inline-block">5 minute ago — </div>
                                                                    <div class="d-inline-block">
                                                                        <%= project.bidCount %> bids
                                                                    </div>
                                                                    <div class="d-inline-block">— Avg: <%= project.currencySign %><%= project.bidCount %></div>
                                                                </span>
                                                            </div>
                                                        </div>

                                                        <div class="info-card-details">
                                                            <span class="icon">
                                                                <svg class="icon-image" width="18" height="18"
                                                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30">
                                                                    <path
                                                                        d="M12.125 13.5C5.87 13.5 1.5 17.2 1.5 22.5V24h21.25v-1.5c0-5.3-4.368-9-10.625-9zm0-2.833c2.93 0 5.313-2.394 5.313-5.334 0-2.94-2.383-5.333-5.313-5.333-2.93 0-5.313 2.393-5.313 5.333 0 2.94 2.384 5.334 5.313 5.334z"
                                                                        fill="#363F4D"></path>
                                                                </svg>
                                                            </span>
                                                            <a href="https://www.freelancer.com/u/aditi342" target="_blank"
                                                                class="text-decoration-none text-light me-2">
                                                                <%= project.ownerCountry %>, <%= project.displayName %>
                                                            </a>
                                                            <div class="d-inline-block">
                                                                <img src="https://cdn.bidman.co/app_assets/img/star.svg"
                                                                    width="16" height="16">
                                                                <span class="badge <%= project.rating === 0 ? 'bg-danger' : 'bg-success' %>"><%= project.rating %></span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="info-card-details">
                                                        <span class="icon">
                                                            <svg class="icon-image" width="18" height="18"
                                                                xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30">
                                                                <path
                                                                    d="M23.648 13.551l-13.2-13.2A1.197 1.197 0 0 0 9.6 0H1.2C.536 0 0 .536 0 1.2v8.4c0 .32.126.623.352.848l13.2 13.2a1.197 1.197 0 0 0 1.696 0l8.4-8.4c.47-.469.47-1.227 0-1.697zM6 8.4a2.4 2.4 0 1 1-.001-4.8 2.4 2.4 0 0 1 0 4.799z"
                                                                    fill="#363F4D"></path>
                                                            </svg>
                                                        </span>
                                                        <span>
                                                            <%= project.jobNames %>
                                                        </span>
                                                    </div>

                                                    <div class="d-flex flex-wrap">
                                                        <!-- Badges would go here if needed -->
                                                    </div>
                                                </div>

                                                <div class="d-none d-lg-block" style="min-width: 130px; max-width: 130px;">
                                                    <div class="d-flex align-items-center info-card-details">
                                                        <% if (project.payment===null || project.payment===undefined|| project.payment===false) { %>
                                                            <img src="https://cdn.bidman.co/app_assets/img/payment-off.svg?v=1"
                                                                width="18" height="18" class="me-2"
                                                                title="Payment not verified">
                                                        <% } else { %>
                                                            <img src="https://cdn.bidman.co/app_assets/img/payment-on.svg?v=1"
                                                                width="18" height="18" class="me-2"
                                                                title="Payment verified">
                                                        <% } %>

                                                        <% if (project.deposit_made === null || project.deposit_made === undefined || project.deposit_made === false) { %>
                                                            <img src="https://cdn.bidman.co/app_assets/img/deposit-off.svg?v=1" width="18" height="18" class="me-2" title="Deposit not made">
                                                        <% } else { %>
                                                            <img src="https://cdn.bidman.co/app_assets/img/deposit-on.svg?v=1" width="18" height="18" class="me-2" title="Deposit made">
                                                        <% } %>
                                                        
                                                        <% if (project.identity_verified===null || project.identity_verified===undefined||project.identity_verified===undefined) { %>
                                                            <img src="https://cdn.bidman.co/app_assets/img/identity-off.svg?v=1"
                                                                width="18" height="18" class="me-2"
                                                                title="Identity not verified">
                                                        <% } else { %>
                                                            <img src="https://cdn.bidman.co/app_assets/img/identity-on.svg?v=1"
                                                                width="18" height="18"
                                                                class="me-2"
                                                                title="Identity verified">
                                                        <% } %>
                                                        
                                                        <% if (project.email==true) { %>
                                                            <img src="https://cdn.bidman.co/app_assets/img/email-on.svg?v=1"
                                                                width="18" height="18"
                                                                title="Email verified">
                                                        <% } else { %>
                                                            <img src="https://cdn.bidman.co/app_assets/img/email-on.svg?v=1"
                                                                width="18"
                                                                height="18"
                                                                title="Email not verified">
                                                        <% } %>
                                                    </div>

                                                    <div class="info-card-details d-flex align-items-center" title="Reviews">
                                                        <img src="<%= project.reviews === 0 ? 'https://cdn.bidman.co/app_assets/img/client-stats-reviews-off.svg' : 'https://cdn.bidman.co/app_assets/img/client-stats-reviews-on.svg' %>"
                                                            width="18" height="18" class="me-2">
                                                        <span style="font-weight: 600; color: <%= project.reviews === 0 ? 'var(--danger)' : 'var(--success)' %>"><%= project.reviews %> reviews</span>
                                                    </div>
                                                    
                                                    <div class="info-card-details d-flex align-items-center" title="Total projects">
                                                        <img src="<%= project.allProjects === 0 ? 'https://cdn.bidman.co/app_assets/img/client-stats-all-off.svg' : 'https://cdn.bidman.co/app_assets/img/client-stats-all-on.svg' %>"
                                                            width="18" height="18" class="me-2">
                                                        <span style="font-weight: 600; color: <%= project.allProjects === 0 ? 'var(--danger)' : 'var(--success)' %>"><%= project.allProjects %> projects</span>
                                                    </div>
                                                    
                                                    <div class="info-card-details d-flex align-items-center" title="Projects last 3 months">
                                                        <img src="<%= project.quaterlyProject === 0 ? 'https://cdn.bidman.co/app_assets/img/client-stats-3m-off.svg' : 'https://cdn.bidman.co/app_assets/img/client-stats-3m-on.svg' %>"
                                                            width="18" height="18" class="me-2">
                                                        <span style="font-weight: 600; color: <%= project.quaterlyProject === 0 ? 'var(--danger)' : 'var(--success)' %>"><%= project.quaterlyProject %> projects</span>
                                                    </div>
                                                    
                                                    <div class="info-card-details d-flex align-items-center" title="Projects last 12 months">
                                                        <img src="<%= project.yearlyProject === 0 ? 'https://cdn.bidman.co/app_assets/img/client-stats-12m-off.svg' : 'https://cdn.bidman.co/app_assets/img/client-stats-12m-on.svg' %>"
                                                            width="18" height="18" class="me-2">
                                                        <span style="font-weight: 600; color: <%= project.yearlyProject === 0 ? 'var(--danger)' : 'var(--success)' %>"><%= project.yearlyProject %> projects</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-12 col-project-price mt-2 mt-md-0 order-2 order-md-1">
                                            <div class="row">
                                                <div class="col-sm-6 col-md-12">
                                                    <div class="info-card-price">
                                                        <%= project.currencySign %><%= project.minimumBudget %> - <%= project.currencySign %><%= project.maximumBudget %>
                                                    </div>
                                                    <div class="info-card-price-type">
                                                        Your Bid: <span><input type="number" name="bid_price"
                                                                class="bid_price" min="1" value="<%= project.randomValue %>"
                                                                required></span>
                                                        <%= project.currencyName %>
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 col-md-12 bid-buttons">
                                                    <div class="mb-2 align-self-center">
                                                        <button class="btn btn-success btn-sm w-100 btn-automatic-bid"
                                                            data-notification="false"
                                                            data-project-title="<%= project.title %>"
                                                            data-project-id="<%= project.projectid %>"
                                                            data-project-jobs="<%= project.jobNames %>"
                                                            data-project-country="<%= project.ownerCountry %>"
                                                            data-user-name="<%= project.fullName %>">
                                                            Place Bid
                                                        </button>
                                                    </div>
                                                    <div class="align-self-center">
                                                        <button class="btn btn-primary btn-sm w-100 customizeRandomValue btn-customize"
                                                            data-project-id="<%= project.projectid %>"
                                                            data-user-name="<%= project.fullName %>"
                                                            data-title="<%= project.title %>"
                                                            data-job-names="<%= project.jobNames %>"
                                                            data-country="<%= project.ownerCountry %>"
                                                            data-budget-string="<%= project.currencySign %><%= project.minimumBudget %> - <%= project.currencySign %><%= project.maximumBudget %>"
                                                            data-currency-code="<%= project.currencySign %>"
                                                            data-skills="3=PHP~335=HTML"
                                                            data-value="<%= project.randomValue %>"
                                                            data-bs-toggle="modal"
                                                            data-bs-target="#modal-customize">
                                                            Customize
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="d-lg-none mt-2 mt-lg-0 col-12 order-1 order-md-2">
                                            <div class="d-flex flex-wrap align-items-center">
                                                <div class="d-flex align-items-center info-card-details"
                                                    style="min-width: 130px">
                                                    <% if (project.payment===null || project.payment===undefined|| project.payment===false) { %>
                                                        <img src="https://cdn.bidman.co/app_assets/img/payment-off.svg?v=1"
                                                            width="18" height="18" class="me-2"
                                                            title="Payment not verified">
                                                    <% } else { %>
                                                        <img src="https://cdn.bidman.co/app_assets/img/payment-on.svg?v=1"
                                                            width="18" height="18" class="me-2"
                                                            title="Payment verified">
                                                    <% } %>

                                                    <% if (project.deposit_made === null || project.deposit_made === undefined || project.deposit_made === false) { %>
                                                        <img src="https://cdn.bidman.co/app_assets/img/deposit-off.svg?v=1" width="18" height="18" class="me-2" title="Deposit not made">
                                                    <% } else { %>
                                                        <img src="https://cdn.bidman.co/app_assets/img/deposit-on.svg?v=1" width="18" height="18" class="me-2" title="Deposit made">
                                                    <% } %>
                                                    
                                                    <% if (project.identity_verified===null || project.identity_verified===undefined||project.identity_verified===undefined) { %>
                                                        <img src="https://cdn.bidman.co/app_assets/img/identity-off.svg?v=1"
                                                            width="18" height="18" class="me-2"
                                                            title="Identity not verified">
                                                    <% } else { %>
                                                        <img src="https://cdn.bidman.co/app_assets/img/identity-on.svg?v=1"
                                                            width="18" height="18"
                                                            class="me-2"
                                                            title="Identity verified">
                                                    <% } %>
                                                    
                                                    <% if (project.email==true) { %>
                                                        <img src="https://cdn.bidman.co/app_assets/img/email-on.svg?v=1"
                                                            width="18" height="18"
                                                            title="Email verified">
                                                    <% } else { %>
                                                        <img src="https://cdn.bidman.co/app_assets/img/email-on.svg?v=1"
                                                            width="18"
                                                            height="18"
                                                            title="Email not verified">
                                                    <% } %>
                                                </div>

                                                <div class="info-card-details d-flex align-items-center" title="Reviews"
                                                    style="min-width: 120px">
                                                    <img src="<%= project.reviews === 0 ? 'https://cdn.bidman.co/app_assets/img/client-stats-reviews-off.svg' : 'https://cdn.bidman.co/app_assets/img/client-stats-reviews-on.svg' %>"
                                                        width="18" height="18" class="me-2">
                                                    <span style="font-weight: 600; color: <%= project.reviews === 0 ? 'var(--danger)' : 'var(--success)' %>"><%= project.reviews %> reviews</span>
                                                </div>
                                                
                                                <div class="info-card-details d-flex align-items-center" title="Total projects"
                                                    style="min-width: 120px">
                                                    <img src="<%= project.allProjects === 0 ? 'https://cdn.bidman.co/app_assets/img/client-stats-all-off.svg' : 'https://cdn.bidman.co/app_assets/img/client-stats-all-on.svg' %>"
                                                        width="18" height="18" class="me-2">
                                                    <span style="font-weight: 600; color: <%= project.allProjects === 0 ? 'var(--danger)' : 'var(--success)' %>"><%= project.allProjects %> projects</span>
                                                </div>
                                                
                                                <div class="info-card-details d-flex align-items-center" title="Projects last 3 months"
                                                    style="min-width: 120px">
                                                    <img src="<%= project.quaterlyProject === 0 ? 'https://cdn.bidman.co/app_assets/img/client-stats-3m-off.svg' : 'https://cdn.bidman.co/app_assets/img/client-stats-3m-on.svg' %>"
                                                        width="18" height="18" class="me-2">
                                                    <span style="font-weight: 600; color: <%= project.quaterlyProject === 0 ? 'var(--danger)' : 'var(--success)' %>"><%= project.quaterlyProject %> projects</span>
                                                </div>
                                                
                                                <div class="info-card-details d-flex align-items-center" title="Projects last 12 months">
                                                    <img src="<%= project.yearlyProject === 0 ? 'https://cdn.bidman.co/app_assets/img/client-stats-12m-off.svg' : 'https://cdn.bidman.co/app_assets/img/client-stats-12m-on.svg' %>"
                                                        width="18" height="18" class="me-2">
                                                    <span style="font-weight: 600; color: <%= project.yearlyProject === 0 ? 'var(--danger)' : 'var(--success)' %>"><%= project.yearlyProject %> projects</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            <% }); %>

                            <!-- Pagination -->
                            <div class="search-result-pagination">
                                <ul>
                                    <% if (currentPage > 1) { %>
                                        <li><a href="/search?page=<%= currentPage - 1 %>">Previous</a></li>
                                    <% } else { %>
                                        <li class="disabled"><span>Previous</span></li>
                                    <% } %>

                                    <% const visiblePages = 5; %>
                                    <% const startPage = Math.max(1, currentPage - Math.floor(visiblePages / 2)); %>
                                    <% const endPage = Math.min(totalPages, startPage + visiblePages - 1); %>

                                    <% if (startPage > 1) { %>
                                        <li><a href="/search?page=1">1</a></li>
                                        <% if (startPage > 2) { %>
                                            <li class="disabled"><span>...</span></li>
                                        <% } %>
                                    <% } %>

                                    <% for (let i = startPage; i <= endPage; i++) { %>
                                        <li><a href="/search?page=<%= i %>" <%= currentPage === i ? 'class="active"' : '' %>><%= i %></a></li>
                                    <% } %>

                                    <% if (endPage < totalPages) { %>
                                        <% if (endPage < totalPages - 1) { %>
                                            <li class="disabled"><span>...</span></li>
                                        <% } %>
                                        <li><a href="/search?page=<%= totalPages %>"><%= totalPages %></a></li>
                                    <% } %>

                                    <% if (currentPage < totalPages) { %>
                                        <li><a href="/search?page=<%= currentPage + 1 %>">Next</a></li>
                                    <% } else { %>
                                        <li class="disabled"><span>Next</span></li>
                                    <% } %>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Customize Bid Modal -->
    <div class="modal fade" id="modal-customize" tabindex="-1" aria-labelledby="customizeBidModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <form id="form-customize-bid">
                    <div class="modal-header">
                        <h5 class="modal-title text-primary" id="customizeBidModalLabel">Customize bid</h5>
                        <div class="btn-group">
                            <button type="button" class="btn btn-secondary btn-sm ms-auto btn-generate-random-bid" data-skill-id="" style="width: 160px">Generate Random Bid</button>
                            <button type="button" class="btn btn-dark btn-sm dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false">
                                <span class="visually-hidden">Toggle Dropdown</span>
                            </button>
                            <div class="dropdown-menu dropdown-random-bid-skills"></div>
                        </div>
                    </div>
                    <div class="modal-body">
                        <textarea class="form-control" id="input-customize" name="input-customize" rows="10" required></textarea>
                    </div>
                    <div class="modal-footer py-2">
                        <h5 class="mb-0 me-auto modal-budget-string" style="color: var(--text-light)"></h5>
                        <div class="text-end">
                            <h5 class="mb-0" style="color: var(--text-light)">Your Bid: <input type="number" name="bid_price" class="form-control bid_price" id="Model_bid_price" min="1" required> <span class="modal-currency-code"></span></h5>
                        </div>
                    </div>
                    <input type="hidden" name="title" id="titleInput">
                    <input type="hidden" name="userName" id="userNameInput">
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger me-auto" data-bs-dismiss="modal">Close</button>
                        <button type="submit" class="btn btn-success btn-place-customize-bid" style="width: 100px">Place Bid</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Bid Modal -->
    <div class="modal fade" id="bidModal" tabindex="-1" aria-labelledby="bidModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <button type="button" class="btn-close btn-close-white position-absolute end-0 m-3" data-bs-dismiss="modal" aria-label="Close"></button>
                <div class="modal-body text-light"></div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="/assets/notification.js"></script>

    <!-- Create stars for background -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const starsContainer = document.getElementById('stars-container');
            const starsCount = 100;
            
            for (let i = 0; i < starsCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');
                
                // Random position
                const posX = Math.random() * 100;
                const posY = Math.random() * 100;
                
                // Random size
                const size = Math.random() * 2;
                
                // Random duration and delay for twinkling
                const duration = 2 + Math.random() * 3;
                const delay = Math.random() * 5;
                
                star.style.left = `${posX}%`;
                star.style.top = `${posY}%`;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.setProperty('--duration', `${duration}s`);
                star.style.setProperty('--delay', `${delay}s`);
                
                starsContainer.appendChild(star);
            }
        });
    </script>

    <!-- Main JavaScript -->
    <script>
        // Configure toastr
        toastr.options = {
            "closeButton": true,
            "timeOut": 6000,
            "extendedTimeOut": 2000,
            "positionClass": "toast-bottom-right",
            "preventDuplicates": false,
            "progressBar": true,
            "showDuration": "300",
            "hideDuration": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        };

        $(document).ready(function() {
            // Customize Bid Modal
            $(document).on('click', '.btn-customize', function(e) {
                e.preventDefault();

                $('#modal-customize').data('project-id', $(this).data('project-id'));
                $('#modal-customize').data('user-name', $(this).data('user-name'));
                $('#modal-customize').data('title', $(this).data('title'));
                $('#modal-customize').data('jobNames', $(this).data('job-names'));
                $('#modal-customize').data('country', $(this).data('country'));

                $('.dropdown-random-bid-skills').html('');
                $('#input-customize').val('');
                var skills = $(this).data('skills').split('~');
                $.each(skills, function(index, val) {
                    var skill = val.split('=');
                    $('.dropdown-random-bid-skills').append('<button type="button" class="dropdown-item btn-generate-random-bid" data-skill-id="' + skill[0] + '">' + skill[1] + '</button>');
                });

                $('#modal-customize .modal-budget-string').html($(this).data('budget-string'));
                $('#modal-customize .modal-currency-code').html($(this).data('currency-code'));
                $('#Model_bid_price').val($(this).data('value'));
            });

            // Generate Random Bid
            $(document).on('click', '.btn-generate-random-bid', function(e) {
                e.preventDefault();

                var btn = $(this);
                $.ajax({
                    type: "post",
                    url: "/generate/randomBid",
                    data: {
                        project_id: $('#modal-customize').data('project-id'),
                        user_name: $('#modal-customize').data('user-name'),
                        title: $('#modal-customize').data('title'),
                        jobName: $('#modal-customize').data('jobNames'),
                        country: $('#modal-customize').data('country')
                    },
                    beforeSend: function() {
                        btn.parents('.btn-group').children('.btn-generate-random-bid').html('<i class="fa fa-spinner fa-spin"></i>');
                        btn.parents('.btn-group').find('.btn-generate-random-bid').prop('disabled', 'disabled');
                    }
                })
                .done(function(Response) {
                    if (Response != 'ERROR') {
                        // Assign the response to the textarea
                        $('#input-customize').val(Response);
                    } else {
                        toastr.error('Error generating random bid');
                    }
                })
                .fail(function() {
                    // Handle failure
                    toastr.error('Failed to generate random bid');
                })
                .always(function() {
                    btn.parents('.btn-group').children('.btn-generate-random-bid').html('Generate Random Bid');
                    btn.parents('.btn-group').find('.btn-generate-random-bid').prop('disabled', '');
                });
            });

            // Place Customize Bid
            $(document).on('submit', '#form-customize-bid', function(e) {
                e.preventDefault();
                var customizeData = $('#input-customize').val();
                var btn = $('.btn-place-customize-bid');
                $.ajax({
                    type: "post",
                    url: "/placeBid",
                    data: {
                        customizeData: customizeData,
                        bidPrice: $('#modal-customize .bid_price').val(),
                        project_id: $('#modal-customize').data('project-id'),
                        user_name: $('#modal-customize').data('user-name'),
                        title: $('#modal-customize').data('title'),
                        jobName: $('#modal-customize').data('jobNames'),
                        country: $('#modal-customize').data('country'),
                    },
                    beforeSend: function() {
                        btn.html('<i class="fa fa-spinner fa-spin"></i>');
                        btn.prop('disabled', 'disabled');
                        $('.btn-customize[data-project-id=' + $('#modal-customize').data('project-id') + ']').parents('.search-result-item').find('.bid-buttons .info-card-details').remove();
                    }
                })
                .done(function(response) {
                    if (response.status === 'success') {
                        $('#modal-customize').modal('hide');
                        $('#input-customize').val('');
                        toastr.success("Bid placed successfully");
                        // Update UI to show bid placed
                        $('.btn-customize[data-project-id=' + $('#modal-customize').data('project-id') + ']').parents('.search-result-item').find('.bid-buttons').html(`
                            <div class="info-card-details">
                                <span class="icon">
                                    <svg class="icon-image" width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30">
                                        <path fill="var(--primary)" d="M12.042 2c-5.523 0-10 4.477-10 10s4.477 10 10 10 10-4.477 10-10-4.478-10-10-10zm-.75 15.75l-5-3.75 1.5-2 3 2.25 5.25-7 2 1.5-6.75 9z"></path>
                                    </svg>
                                </span>
                                <span class="text-primary">
                                    You have already bid on this project.
                                </span>
                            </div>
                        `);
                    } else {
                        if (response.error_code === 'ProjectExceptionCodes.DUPLICATE_BID') {
                            toastr.error("You have already bid on that project.");
                        } else if (response.error_code === 'ProjectExceptionCodes.SKILLS_REQUIREMENT_NOT_MET') {
                            toastr.error("Your Skills don't match.");
                        } else if (response.error_code === 'ProjectExceptionCodes.BID_LIMIT_EXCEEDED') {
                            toastr.error("You have Used all of your bids.");
                        } else if (response.ErrorCode === '100') {
                            toastr.error(response.Message);
                            $('.btn-customize[data-project-id=' + $('#modal-customize').data('project-id') + ']').parents('.bid-buttons').prepend(`
                                <div class="info-card-details">
                                    <span class="icon">
                                        <svg class="icon-image" width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30">
                                            <path fill="var(--danger)" d="M9,0C4.1,0,0,4,0,9s4.1,9,9,9s9-4.1,9-9S14,0,9,0z M13.5,11.9c0.4,0.4,0.4,1.1,0,1.5c-0.4,0.4-1.1,0.4-1.5,0L9,10.5l-3,2.9c-0.4,0.4-1.1,0.4-1.5,0c-0.4-0.4-0.4-1.1,0-1.5L7.5,9L4.5,6c-0.4-0.4-0.4-1.1,0-1.5c0.4-0.4,1.1-0.4,1.5,0l3,2.9L12,4.5c0.4-0.4,1.1-0.4,1.5,0c0.4,0.4,0.4,1.1,0,1.5L10.5,9L13.5,11.9z"></path>
                                        </svg>
                                    </span>
                                    <span class="text-danger">
                                        ${response.Message}
                                    </span>
                                </div>
                            `);
                        } else if (response.ErrorCode === '101') {
                            $('#modal-customize').modal('hide');
                            $('#input-customize').val('');
                            toastr.error(response.Message);
                            $('.btn-customize[data-project-id=' + $('#modal-customize').data('project-id') + ']').parents('.bid-buttons').html(`
                                <div class="info-card-details">
                                    <span class="icon">
                                        <svg class="icon-image" width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30">
                                            <path fill="var(--danger)" d="M9,0C4.1,0,0,4,0,9s4.1,9,9,9s9-4.1,9-9S14,0,9,0z M13.5,11.9c0.4,0.4,0.4,1.1,0,1.5c-0.4,0.4-1.1,0.4-1.5,0L9,10.5l-3,2.9c-0.4,0.4-1.1,0.4-1.5,0c-0.4-0.4-0.4-1.1,0-1.5L7.5,9L4.5,6c-0.4-0.4-0.4-1.1,0-1.5c0.4-0.4,1.1-0.4,1.5,0l3,2.9L12,4.5c0.4-0.4,1.1-0.4,1.5,0c0.4,0.4,0.4,1.1,0,1.5L10.5,9L13.5,11.9z"></path>
                                        </svg>
                                    </span>
                                    <span class="text-danger">
                                        ${response.Message}
                                    </span>
                                </div>
                            `);
                            $('#modal-customize').data('project-id', '');
                        } else {
                            toastr.error(response.message || "An error occurred");
                        }
                    }
                })
                .fail(function() {
                    toastr.error("Failed to place bid");
                })
                .always(function() {
                    btn.html('Place Bid');
                    btn.prop('disabled', '');
                });
            });

            // Place Automatic Bid
            $(document).on('click', '.btn-automatic-bid', function(e) {
                e.preventDefault();

                var btn = $(this);
                $.ajax({
                    type: "post",
                    url: "/place/automaticBid",
                    data: {
                        project_id: btn.data('project-id'),
                        project_title: btn.data('project-title'),
                        user_name: btn.data('user-name'),
                        project_jobs: btn.data('project-jobs'),
                        project_country: btn.data('project-country'),
                        bid_price: btn.parents('.row').find('.bid_price').val()
                    },
                    beforeSend: function() {
                        btn.html('<i class="fa fa-spinner fa-spin"></i>');
                        btn.prop('disabled', 'disabled');
                        btn.parents('.search-result-item').find('.bid-buttons .info-card-details').remove();
                    }
                })
                .done(function(response) {
                    if (response.status === 'success') {
                        toastr.success("Bid placed successfully");
                        // Update UI to show bid placed
                        btn.parents('.search-result-item').find('.bid-buttons').html(`
                            <div class="info-card-details">
                                <span class="icon">
                                    <svg class="icon-image" width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30">
                                        <path fill="var(--primary)" d="M12.042 2c-5.523 0-10 4.477-10 10s4.477 10 10 10 10-4.477 10-10-4.478-10-10-10zm-.75 15.75l-5-3.75 1.5-2 3 2.25 5.25-7 2 1.5-6.75 9z"></path>
                                    </svg>
                                </span>
                                <span class="text-primary">
                                    You have already bid on this project.
                                </span>
                            </div>
                        `);
                    } else {
                        if (response.error_code === 'ProjectExceptionCodes.DUPLICATE_BID') {
                            toastr.error("You have already bid on that project.");
                        } else if (response.error_code === 'ProjectExceptionCodes.SKILLS_REQUIREMENT_NOT_MET') {
                            toastr.error("Your Skills don't match.");
                        } else if (response.error_code === 'ProjectExceptionCodes.BID_LIMIT_EXCEEDED') {
                            toastr.error("You have Used all of your bids.");
                        } else {
                            toastr.error(response.message || "An error occurred");
                        }
                    }
                })
                .fail(function() {
                    toastr.error("Failed to place bid");
                })
                .always(function() {
                    btn.html('Place Bid');
                    btn.prop('disabled', '');
                });
            });

            // Check for new projects
            var lastCount = '0';
            var notificationSound = new Audio('/assets/notification.mp3');

            function checkNewProjects() {
                $.ajax({
                    type: "post",
                    url: "/checkNewProjects",
                })
                .done(function(response) {
                    if (typeof response === 'string') {
                        response = JSON.parse(response);
                    }

                    lastCount = response.Total || '0';

                    if (response.Total == '0') {
                        $('.search-result-newProjectAlert').hide();
                    } else {
                        $('.search-result-newProjectAlert').show();
                        $('.search-result-newProjectAlert-icon').html('View ' + response.Total + ' new jobs');
                    }

                    if (response.Projects && response.Projects.length > 0) {
                        notificationSound.play();
                        
                        response.Projects.forEach(function(project) {
                            var html = '';
                            html += '<h6 class="toast-project-title">' + project.title + '</h6>';
                            html += '<p class="toast-project-skills">' + project.job_string + '</p>';
                            html += '<p class="toast-project-description">' + project.description + '</p>';

                            if (project.min_budget && project.max_budget) {
                                html += '<div class="notification-project-price">' + project.currency_sign + project.min_budget + ' - ' + project.currency_sign + project.max_budget + ' ' + project.currency_code + (project.type == 'hourly' ? ' per hour' : '') + '</div>';
                            } else if (project.min_budget && !project.max_budget) {
                                html += '<div class="notification-project-price">' + project.currency_sign + project.min_budget + ' ' + project.currency_code + (project.type == 'hourly' ? ' per hour' : '') + '</div>';
                            } else {
                                html += '<div class="notification-project-price">Upto ' + project.currency_sign + project.max_budget + ' ' + project.currency_code + (project.type == 'hourly' ? ' per hour' : '') + '</div>';
                            }

                            html += `
                            <div class="row mt-3">
                                <div class="col-6"><button class="btn btn-success btn-sm w-100 btn-automatic-bid" data-notification="true" data-project-id="${project.id}">Place Bid</button></div>
                                <div class="col-6"><button class="btn btn-primary btn-sm w-100 btn-customize" data-project-id="${project.id}" data-bid-price="${project.bid_price}" data-budget-string="${project.budget_string}" data-currency-code="${project.currency_code}" data-skills="${project.project_jobs}" data-bs-toggle="modal" data-bs-target="#modal-customize">Customize</button></div>
                            </div>
                            `;

                            toastr.info(html);
                        });
                    }
                })
                .fail(function() {
                    console.error("Failed to check for new projects");
                });
            }

            // Check for new projects every 30 seconds
            setInterval(checkNewProjects, 30000);

            // View Bid Modal
            $(document).on('click', '.btn-view-bid', function() {
                var btn = $(this);
                $('#bidModal .modal-body').html('Loading...');

                $.ajax({
                    type: "GET",
                    url: '/get_bid?id=' + btn.data('id'),
                    success: function(response) {
                        $('#bidModal .modal-body').html(response);
                    },
                    error: function() {
                        $('#bidModal .modal-body').html('Failed to load bid details');
                    }
                });
            });

            // Handle stored project ID for notifications
            const storedProjectId = sessionStorage.getItem('projectId');
            const buttonType = sessionStorage.getItem('buttonType');
            
            if (storedProjectId && buttonType) {
                if (buttonType === 'automatic') {
                    document.querySelectorAll('.search-result-item .btn-automatic-bid').forEach(projectElement => {
                        const projectId = projectElement.getAttribute('data-project-id');
                        if (projectId == storedProjectId) {
                            projectElement.click();
                            sessionStorage.removeItem('projectId');
                            sessionStorage.removeItem('buttonType');
                        }
                    });
                } else if (buttonType === 'customize') {
                    document.querySelectorAll('.search-result-item .btn-customize').forEach(projectElement => {
                        const projectId = projectElement.getAttribute('data-project-id');
                        if (projectId == storedProjectId) {
                            projectElement.click();
                            sessionStorage.removeItem('projectId');
                            sessionStorage.removeItem('buttonType');
                        }
                    });
                }
            }
        });
    </script>
</body>
</html>